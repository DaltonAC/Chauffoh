##### [<-- Back To Main](../README.md)

# APIs

[FastAPI Docs](localhost:8000/docs/)

## Rides

- **Methods**: `POST`, `GET`, `GET`, `GET`, `PATCH`, `PATCH`,
- **Paths**: `/api/rides`, `/api/rides/{ride_id}`, `/api/rides/history/{account_id}`, `/api/rides/set_status/{ride_id}/{status}`

<details>
<summary>Input</summary>

```json
{
  "account_id": int,
  "is_roundtrip": bool,
  "roundtrip_date": dattime,
  "start_location": string,
  "end_location": string,
  "vehicle_info": string,
  "comments": string
}
```
</details>

<details>
<summary>Output</summary>

```json
{
  "id": int,
  "account_id": int,
  "is_roundtrip": bool,
  "roundtrip_date": datetime,
  "start_location": string,
  "end_location": string,
  "ride_status": string,
  "datetime": string,
  "vehicle_info": string,
  "comments": string,
  "driver_id": int
}
```
</details>
<br>

Creating a new ride saves the associated account id, whether or not it is round trip, the date and time of the (optional) roundtrip second leg, start location. end location, vehicle descriptin, and any (optional) comments. This adds a new ride to the database. The id, ride status, date and time ride is requested, and driver id are set automatically.


## Receipts

- **Method**: `POST`,`GET`, `DELETE`, `GET`, `GET`, `GET`
- **Path**: `/api/receipts`, `/api/receipts/rides/{ride_id}`, `/api/receipts/{receipt_id}`, `/api/receipts/history/{account_id}`

<details>
<summary>Input</summary>

```json
{
  "ride_id": int,
  "account_id": int,
  "total": int
}
```
</details>

<details>
<summary>Output</summary>

```json
{
  "receipt_id": int,
  "total": int,
  "ride_id": int,
  "account_id": int
}
```
</details>
<br>
Upon creation of a ride, a receipt is generated by saving the id of the ride, the id of the account, the total price, and an automatically generated reciept id. This receipt is saved to the database and can be accessed by the user (customer).

## Accounts

- Method: `GET`, `PATCH`, `GET`, `GET`, `GET`, `GET`, `GET`, `GET`, `POST`
- Path: `/api/accounts/{username}`, `/api/accounts/`, `/api/users/current`, `/api/employees`, `/api/employees/current`, `/api/protected`, `/token`

<details>
<summary>Input</summary>

```json
{
  "username": string,
  "password": string,
  "first_name": string,
  "last_name": string,
  "email": string,
  "is_employee": bool,
  "current_ride": bool
}
```
</details>

<details>
<summary>Output</summary>

```json
{
  "access_token": string,
  "token_type": "Bearer",
  "account": {
    "id": int,
    "username": string,
    "hash_password": string,
    "first_name": string,
    "last_name": string,
    "email": string,
    "is_employee": bool,
    "current_ride": bool
  }
}
```
</details>
<br>
The Accounts API will create, update, and access user and employee accounts, as well as managing auth functionality. Users will need to enter in all of the information listed to create an account. Logging in generates a token associated with the account. The is_employee boolean field determines whether an account has access to employee pages.
